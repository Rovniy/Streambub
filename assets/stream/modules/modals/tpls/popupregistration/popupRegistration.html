<div ng-controller="popupRegistrationController as vm" class="popupRegForm">
    <div class="modal-header">
        <button type="button" class="close" ng-click="$dismiss()"><i class="fa fa-close"></i></button>
        <h3 class="modal-title ta-center">Регистрация на StreamPub.net</h3>
    </div>
    <div class="modal-body modal-body-notification text-center">
        <div class="row">
            <h4>Укажи действующую почту - <br/>именно на нее мы отправим подарок в случае победы!</h4>
        </div>
        <form class="form-horizontal" role="form" name="popupRegForm" ng-show="vm.step == 1" ng-class="{ 'has-error' :  (popupRegForm.login.$invalid-pattern) && (popupRegForm.login.$dirty) }">
            <input type="email" class="form-control input-lg ta-center" ng-model="login" placeholder="Адрес электронной почты" validate-email required>
            <button type="submit" class="btn div-margin-auto button-action" ng-disabled="!popupRegForm.$valid" ng-click="vm.registration(login)">Зарегистрироваться</button>
        </form>
        <div class="btns-area">
            <button ng-click="vm.regWithExternal('twitch'); disableMe = true" ng-disabled="disableMe" type="button" class="btn btn-twitch btn-lg" uib-tooltip="Зарегистрироваться с помощью аккаунта Twitch.tv" tooltip-placement="left">
                <i ng-if="!disableMe" class="fa fa-twitch fa-2x"></i>
                <i ng-if="disableMe" class="fa fa-spin fa-spinner fa-2x"></i>
            </button>
<!--
            <button ng-click="vm.regWithExternal('vk')" type="button" class="btn btn-twitch btn-lg" uib-tooltip="Зарегистрироваться с помощью аккаунта Вконтакте" tooltip-placement="left"><i class="fa fa-vk fa-2x"></i></button>
-->
<!--
            <button ng-click="vm.regWithExternal('facebook')" type="button" class="btn btn-twitch btn-lg" uib-tooltip="Зарегистрироваться с помощью аккаунта Facebook" tooltip-placement="left"><i class="fa fa-facebook fa-2x"></i></button>
-->
        </div>
        <div ng-show="vm.step == 2">
            <h3>Спасибо за регистрацию. Теперь ты можешь участвувать в розыгрыше.</h3>
        </div>
        <div>
            <p>Нажимая "Зарегистрироваться", ты подтверждаешь согласие с <a href="/terms-of-use" target="_blank">условиями пользования</a>.</p>
        </div>
    </div>
    <div class="modal-footer">
        <ul class="error-type color-red" ng-if="vm.regError">
            <li>{{vm.regError}}</li>
        </ul>
    </div>
</div>